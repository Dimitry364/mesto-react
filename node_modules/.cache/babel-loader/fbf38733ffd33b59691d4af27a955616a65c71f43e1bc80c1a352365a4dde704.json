{"ast":null,"code":"import React from\"react\";import api from\"../utils/Api\";import Header from\"./Header\";import Main from\"./Main\";import Footer from\"./Footer\";import EditAvatarPopup from\"./EditAvatarPopup\";import EditProfilePopup from\"./EditProfilePopup\";import AddPlacePopup from\"./AddPlacePopup\";import ImagePopup from\"./ImagePopup\";import{CurrentUserContext}from\"../contexts/CurrentUserContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[isEditProfilePopupOpen,setIsEditProfilePopupOpen]=React.useState(false);const[isAddPlacePopupOpen,setIsAddPlacePopupOpen]=React.useState(false);const[isEditAvatarPopupOpen,setIsEditAvatarPopupOpen]=React.useState(false);const[selectedCard,setSelectedCard]=React.useState(null);const[currentUser,setCurrentUser]=React.useState({});const[cards,setCards]=React.useState([]);const initialState=\"Создать\";const[buttonTextPopup,setButtonTextPopup]=React.useState(initialState);function changeButtonPopup(){setButtonTextPopup(\"Сохранение...\");setTimeout(()=>setButtonTextPopup(initialState),[2000]);}React.useEffect(()=>{api.getInitialData().then(_ref=>{let[userData,initialCardsData]=_ref;setCurrentUser(userData);setCards(initialCardsData);}).catch(err=>{console.error(err);});},[]);function handleCardLike(card){const isLiked=card.likes.some(i=>i._id===currentUser._id);api.likeCard(card._id,isLiked).then(newCard=>{setCards(state=>state.map(c=>c._id===card._id?newCard:c));}).catch(err=>{console.error(err);});}function handleCardDelete(card){api.deleteCard(card).then(()=>{setCards(items=>items.filter(c=>c._id!==card._id&&c));}).catch(err=>{console.error(err);});}function handleUpdateUser(name,about){api.setUser(name,about).then(newUser=>{setCurrentUser(newUser);closeAllPopups();}).catch(err=>{console.error(err);});}function handleAvatarUpdate(data){api.updateAvatar(data).then(newAvatar=>{setCurrentUser(newAvatar);closeAllPopups();}).catch(err=>{console.error(err);});}function handleAddPlaceSubmit(name,link){api.addCard(name,link).then(newCard=>{setCards([newCard,...cards]);closeAllPopups();}).catch(err=>{console.error(err);});}function handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);}function handleEditProfileClick(){setIsEditProfilePopupOpen(true);}function handleAddPlaceClick(){setIsAddPlacePopupOpen(true);}function handleCardClick(card){setSelectedCard(card);}function handlePopupCloseClick(evt){if(evt.target.classList.contains(\"popup\")){closeAllPopups();}}function closeAllPopups(){setIsEditAvatarPopupOpen(false);setIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setSelectedCard(null);}return/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onEditAvatar:handleEditAvatarClick,onCardClick:handleCardClick,cards:cards,onCardLike:handleCardLike,onCardDelete:handleCardDelete}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onCloseClick:handlePopupCloseClick,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateUser:handleAvatarUpdate,onClick:changeButtonPopup,onCloseClick:handlePopupCloseClick,buttonText:buttonTextPopup}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onUpdateUser:handleAddPlaceSubmit,onClick:changeButtonPopup,onCloseClick:handlePopupCloseClick,buttonText:buttonTextPopup}),/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,onClose:closeAllPopups,onCloseClick:handlePopupCloseClick})]})});}export default App;","map":{"version":3,"names":["React","api","Header","Main","Footer","EditAvatarPopup","EditProfilePopup","AddPlacePopup","ImagePopup","CurrentUserContext","jsx","_jsx","jsxs","_jsxs","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","useState","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","currentUser","setCurrentUser","cards","setCards","initialState","buttonTextPopup","setButtonTextPopup","changeButtonPopup","setTimeout","useEffect","getInitialData","then","_ref","userData","initialCardsData","catch","err","console","error","handleCardLike","card","isLiked","likes","some","i","_id","likeCard","newCard","state","map","c","handleCardDelete","deleteCard","items","filter","handleUpdateUser","name","about","setUser","newUser","closeAllPopups","handleAvatarUpdate","data","updateAvatar","newAvatar","handleAddPlaceSubmit","link","addCard","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","handleCardClick","handlePopupCloseClick","evt","target","classList","contains","Provider","value","children","className","onEditProfile","onAddPlace","onEditAvatar","onCardClick","onCardLike","onCardDelete","isOpen","onClose","onCloseClick","onUpdateUser","onClick","buttonText"],"sources":["C:/Users/Dmitry364/Desktop/dev/mesto-react/mesto-react/src/components/App.js"],"sourcesContent":["import React from \"react\";\nimport api from \"../utils/Api\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport ImagePopup from \"./ImagePopup\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] =\n    React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] =\n    React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState(null);\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n\n  const initialState = \"Создать\";\n  const [buttonTextPopup, setButtonTextPopup] = React.useState(initialState);\n\n  function changeButtonPopup() {\n    setButtonTextPopup(\"Сохранение...\");\n    setTimeout(() => setButtonTextPopup(initialState), [2000]);\n  }\n\n  React.useEffect(() => {\n    api\n      .getInitialData()\n      .then(([userData, initialCardsData]) => {\n        setCurrentUser(userData);\n        setCards(initialCardsData);\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }, []);\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n\n    api\n      .likeCard(card._id, isLiked)\n      .then((newCard) => {\n        setCards((state) =>\n          state.map((c) => (c._id === card._id ? newCard : c))\n        );\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }\n\n  function handleCardDelete(card) {\n    api\n      .deleteCard(card)\n      .then(() => {\n        setCards((items) => items.filter((c) => c._id !== card._id && c));\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }\n\n  function handleUpdateUser(name, about) {\n    api\n      .setUser(name, about)\n      .then((newUser) => {\n        setCurrentUser(newUser);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }\n\n  function handleAvatarUpdate(data) {\n    api\n      .updateAvatar(data)\n      .then((newAvatar) => {\n        setCurrentUser(newAvatar);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }\n\n  function handleAddPlaceSubmit(name, link) {\n    api\n      .addCard(name, link)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n\n  function handlePopupCloseClick(evt) {\n    if (evt.target.classList.contains(\"popup\")) {\n      closeAllPopups();\n    }\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setSelectedCard(null);\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Header />\n        <Main\n          onEditProfile={handleEditProfileClick}\n          onAddPlace={handleAddPlaceClick}\n          onEditAvatar={handleEditAvatarClick}\n          onCardClick={handleCardClick}\n          cards={cards}\n          onCardLike={handleCardLike}\n          onCardDelete={handleCardDelete}\n        />\n        <Footer />\n\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onCloseClick={handlePopupCloseClick}\n          onUpdateUser={handleUpdateUser}\n        />\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleAvatarUpdate}\n          onClick={changeButtonPopup}\n          onCloseClick={handlePopupCloseClick}\n          buttonText={buttonTextPopup}\n        />\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleAddPlaceSubmit}\n          onClick={changeButtonPopup}\n          onCloseClick={handlePopupCloseClick}\n          buttonText={buttonTextPopup}\n        />\n        <ImagePopup\n          card={selectedCard}\n          onClose={closeAllPopups}\n          onCloseClick={handlePopupCloseClick}\n        />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}